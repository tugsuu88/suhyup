<%@ page import="java.util.*, util.*" contentType="text/html;charset=euc-kr"%><%@ include file="include/admin_session.jsp" %><%@ include file="include/logincheck.jsp" %><%@ include file="include/top_login.jsp" %><%@ include file="include/top_menu08.jsp" %><jsp:useBean id="FrontBoard" scope="session" class="Bean.Front.Common.FrontBoradType1"/><jsp:useBean id="FrontDbUtil" scope="session" class="Bean.Front.Common.FrontDbUtil"/><%	String ListPage = Converter.nullchk(request.getParameter("ListPage"));	//String pageNum = request.getParameter("pageNum");	String myPage = request.getRequestURI();	try	{		String mode = Converter.nullchk(request.getParameter("mode"));	    String KEY = Converter.nullchk(request.getParameter("KEY"));	//검색어	    if(KEY != null && !KEY.equals("")) {	    	KEY = StringReplace.sqlFilter(KEY);		//금지어 필터링	    }else{	    	KEY = "";	    }	    	    //out.println("KEY : " + KEY + "<br>");	    String FIELD = Converter.nullchk(request.getParameter("FIELD"));	//검색구분// 	  	out.println("mode : " + mode + "<br>");// 	  	out.println("KEY : " + KEY + "<br>");// 	  	out.println("FIELD : " + FIELD + "<br>");		int PAGE = 1;		///////////////////////////////////////////////////////////////////////////	    String TableName = " sh_commodity ";	    String SelectCondition = null;	    String WhereCondition = null;	    String OrderCondition = null;		if (request.getParameter("PAGE") == null || ((String)request.getParameter("PAGE")).equals("")){			PAGE = 1;	    }else{			PAGE = Integer.parseInt(request.getParameter("PAGE"));	    }	    SelectCondition = " sh_seq_no,sh_title,sh_content,sh_hit_cnt,sh_reg_writer,sh_reg_dt";	    OrderCondition  = " ORDER BY sh_seq_no DESC";	    WhereCondition=" where 1=1 ";	    	    if(mode.equals("search")){						if(!FIELD.equals("")){				if(FIELD.equals("title")){					WhereCondition+=" and sh_title like '%" + KEY + "%'";				}else{					WhereCondition+=" and sh_content like '%" + KEY + "%'";				}			}// 			else{// 			}// 	    	if(!FIELD.equals("")){// 	    		WhereCondition+=" and " + FIELD + " like '%" + KEY + "%'";// 	    	}else{// 	    		WhereCondition+=" and (sh_title like '%" + KEY + "%' or sh_content like '%" + KEY + "%')";// 	    	}	    }// 	    out.println("WhereCondition : " + WhereCondition + "<br>");		int StartRecord = 0;		int EndRecord   = 0;		int DefaultListRecord = 10;		int DefaultPageBlock = 10;		int TotalRecordCount = FrontBoard.TotalCount(TableName, WhereCondition);		//out.print("TotalRecordCount : " + TotalRecordCount + "<br><br>");		///////////////////////////////////////////////////////////////////////////			    String sel_choice1 = null;	    String sel_choice2 = null;	    String sel_choice3 = null;	    if (FIELD.equals("title"))			sel_choice1="selected";	    /* if (FIELD.equals("REG_DATE"))			sel_choice2="selected"; */	    if (FIELD.equals("text"))			sel_choice3="selected";%><script language="javascript" src="js/common.js"></script><script language="javascript">	function GoReg(){		/*		if(!pbform.FIELD.value){			alert("조회구분을 해주세요");			pbform.FIELD.focus();			return;		}		*/		if(!pbform.KEY.value){			alert("검색어를 적어주세요");			pbform.KEY.focus();			return;		}		pbform.mode.value = "search";		pbform.action = "commodity.jsp";	    pbform.submit();	}		//등록	function GoWrite(){		pbform.action = "commodity_write.jsp";		pbform.mode.value = "add";		pbform.submit();	}</script><!-- 신고물품처리 결과 --><form method=post name="pbform" action="" style="margin:0px;"><input type="hidden" name="mode" value="">    <div class="list-header">        <table border="0" cellspacing="0" cellpadding="0">            <tr>                <td  class="admin_subject">신고물품<br>처리결과</td>                <td class="bluesky">조회구분</td>                <td>                    <select name="FIELD">                        <option value="">선택</option>                        <option value="title" <%=sel_choice1%>>제목</option>                        <option value="text" <%=sel_choice3%>>내용</option>                        <!-- -->                    </select>                    <input type="text" class="input01" size="48" name="KEY" value="<%=KEY%>">                    <a href="javascript:GoReg();"><img src="img/btn_search.gif" width="38" height="17" border="0" alt="검색"></a>                    <a href="javascript:pbform.reset();"><img src="img/btn_refresh.gif" width="48" height="17" border="0" alt="초기화"></a>                </td>            </tr>        </table>    </div><!-- // 신고물품처리 결과 --><br><div class="tbl-wrap">      <!-- 검색결과 -->      <table border="0" cellspacing="0" cellpadding="0">        <tr>          <td height="30"><img src="img/result.gif" align="absmiddle"> 검색결과 :            <span class="result_text">총 <%=TotalRecordCount %>건</span><br />          <td height="30" align="right"><a href="javascript:GoWrite();"><img src="img/btn_upload.gif" width="55" height="21" alt="등록" border="0"></a></td>        </tr>      </table>      <!-- // 검색결과 -->    <div class="subtit"><img src="img/arrow.gif" width="13" height="16" align="absmiddle">신고물품처리결과</div>      <table border="0" cellspacing="0" cellpadding="0" class="tbl-list">        <tr>          <td class="board_bg_title" align="center">No</td>          <td class="board_bg_title" align="center">제목</td>          <td class="board_bg_title" align="center">조회수</td>          <td class="board_bg_title" align="center">등록자</td>          <td class="board_bg_title" align="center">등록일</td>        </tr>        <%//         		out.println("TableName : " + TableName+"<br>");//         		out.println("SelectCondition : " + SelectCondition+"<br>");//         		out.println("WhereCondition : " + WhereCondition+"<br>");//         		out.println("OrderCondition : " + OrderCondition+"<br>");//         		out.println("PAGE : " + PAGE+"<br>");//         		out.println("DefaultListRecord : " + DefaultListRecord+"<br>");        				Vector ResultVector = FrontBoard.list(TableName, SelectCondition, WhereCondition, OrderCondition, PAGE, 0, DefaultListRecord);//         		out.println("ResultVector.size() : " + ResultVector.size()+"<br>");			    if( ResultVector.size() > 0){ 					for (int i=0; i < ResultVector.size();i++){    						Hashtable h = (Hashtable)ResultVector.elementAt(i);// 		        		out.println("h"+h.toString()+"]");						String sh_title = (String)h.get("SH_TITLE");	//제목						if (sh_title.length() > 31){							sh_title = sh_title.substring(0,31);							sh_title += "...";						}						//int listnum = DefaultListRecord * (PAGE - 1) + i + 1;	 //글번호 계산						int listnum = (TotalRecordCount) - (i + (DefaultListRecord * (PAGE - 1)));	//글번호 계산(역순)		%>        <tr  onMouseOver=this.style.backgroundColor='F4F4F4' onMouseOut=this.style.backgroundColor='ffffff'>          <td align="center"><%=listnum %></td>          <td style="padding-left:10;">				<a href="commodity_write.jsp?sh_seq_no=<%=(String)h.get("SH_SEQ_NO")%>&mode=edit&PAGE=<%=PAGE%>&FIELD=<%=FIELD%>&KEY=<%=KEY%>"><%=sh_title %></a>          </td>                    <td align="center"><%=(String)h.get("SH_HIT_CNT") %></td>          <td align="center"><%=(String)h.get("SH_REG_WRITER") %></td>          <td align="center"><%=(String)h.get("SH_REG_DT") %></td>        </tr>        <%					}				} else {			%>					<tr>						<td class="no" align="center" colspan="9">등록 자료가 없습니다.</td>					</tr>			<%				}			%>      </table>      <br>      <!-- // 리스트 -->      <!-- 페이지 넘버링 -->      <table width="945" border="0" cellspacing="0" cellpadding="0">        <tr>          <td align="center">          	<% if(TotalRecordCount > 0) { %>			<%=FrontDbUtil.PrintPage(Integer.toString(PAGE), TotalRecordCount, DefaultListRecord, DefaultPageBlock, "commodity.jsp?KEY="+KEY+"&mode=" + mode + "&FIELD=" + FIELD + "&PAGE=","<img src=img/board_prev.gif width=13 height=13 align=absmiddle border=0>","<img src=img/board_next.gif width=13 height=13 align=absmiddle border=0>")%>			<% } %>          </td>        </tr>      </table>      <!-- 페이지 넘버링 --></div><input type="hidden" name="sh_seq_no"><input type="hidden" name="PAGE"></form><%@ include file="include/bottom.jsp" %><%	} catch(Exception e) {		out.println("commodity.jsp : " + e.getMessage());	} finally {	}%>